# Changelog - Hyperliquid Terminal

Все важные изменения в проекте Hyperliquid Terminal будут документироваться в этом файле.

## [Unreleased] - 2025-12-17

### Добавлено
- **Новая система мониторинга позиций близких к ликвидации**
  - Отслеживание крупных позиций с высоким риском ликвидации
  - Два режима работы: простой и продвинутый анализ
  - Превентивные предупреждения о потенциальных рисках

- **Файлы системы мониторинга рисков:**
  - `positions_at_risk_config.py` - конфигурация
  - `positions_at_risk_monitor.py` - продвинутый анализ рисков
  - `positions_at_risk_monitor_simple.py` - базовый мониторинг
  - `run_positions_risk_monitor.sh` - скрипт запуска
  - `positions_at_risk_monitor.service` - systemd сервис
  - `POSITIONS_RISK_README.md` - полная документация

### Возможности мониторинга рисков

#### Типы предупреждений:
- **OI_SURGE** - резкие изменения открытого интереса (>15-20%)
- **LIQUIDATION_RISK** - позиции близкие к ликвидации (в пределах 5-8%)
- **FUNDING_PRESSURE** - высокие ставки фандинга (>0.05%)
- **HIGH_LEVERAGE_RISK** - риски высокого плеча (15x+)

#### Технические особенности:
- Отслеживание активов: BTC, ETH, SOL (расширяемо)
- Пороговые значения: $1M+ USD открытого интереса
- Расчет уровней ликвидации на основе маржинальных требований
- Анализ концентрации позиций и ценовых рисков
- Фоновый и интерактивный режимы работы

### Команды запуска

```bash
# Простой мониторинг (базовый)
./run_positions_risk_monitor.sh

# Продвинутый анализ рисков
./run_positions_risk_monitor.sh -m advanced

# Фоновый режим с логированием
./run_positions_risk_monitor.sh -b -l monitor.log

# Остановка фонового процесса
./run_positions_risk_monitor.sh --stop positions_risk_monitor_simple.pid
```

### Различия с существующим монитором ликвидаций

| Параметр | Монитор ликвидаций | Positions at Risk |
|----------|-------------------|-------------------|
| **Фокус** | Уже произошедшие ликвидации | Потенциальные риски |
| **Данные** | recentTrades с liquidation=true | metaAndAssetCtxs + расчеты |
| **Реактивность** | Постфактум | Превентивно |
| **Польза** | Исторический анализ | Раннее предупреждение |

## [1.0.0] - 2025-12-17

### Добавлено
- **Система мониторинга ликвидаций**
  - Отслеживание ликвидаций в реальном времени
  - Поддержка BTC, ETH, SOL
  - Конфигурируемые пороговые значения ($50k+)
  - Статистика по сессиям
  - Простой и продвинутый режимы

- **Основные компоненты:**
  - `liquidations_monitor.py` - простой монитор ликвидаций
  - `liquidations_monitor_advanced.py` - продвинутый с статистикой
  - `liquidations_config.py` - конфигурация
  - `run_liquidations_monitor.sh` - скрипт запуска
  - `liquidations-liquidations.service` - systemd сервис

### API интеграция
- Hyperliquid REST API для получения данных
- WebSocket поддержка (подготовлена)
- Асинхронная обработка с aiohttp
- Обработка ошибок и переподключение

### Интерфейс
- Текстовый интерфейс с эмодзи
- Настраиваемая ширина отображения
- Цветовое кодирование по типам ликвидаций
- Сессионная статистика

## [0.1.0] - 2025-12-17

### Добавлено
- **Hyperliquid Terminal**
  - Текстовый пользовательский интерфейс (Textual)
  - Отображение L2 ордербуков
  - Недавние сделки в реальном времени
  - Свечные графики (ASCII)
  - Открытый интерес и фандинг
  - Поддержка множественных активов

- **API клиент**
  - Асинхронный HTTP клиент
  - Поддержка различных эндпоинтов
  - Обработка ошибок и таймаутов
  - Connection pooling и keepalive

- **Конфигурация**
  - Гибкие настройки через config.py
  - Поддержка различных активов
  - Настройки интерфейса

### Системная интеграция
- systemd сервисы для всех компонентов
- Логирование и мониторинг
- Автоматический перезапуск при сбоях
- Подготовка для production развертывания

---

## Условные обозначения

- `Добавлено` - новые функции
- `Изменено` - изменения в существующей функциональности
- `Устарело` - функциональность, которая будет удалена в будущих версиях
- `Удалено` - удаленная функциональность
- `Исправлено` - исправленные баги
- `Безопасность` - исправления безопасности